<!DOCTYPE html>
<html>
<head>
    <title>图书管理系统登录</title>
    <script>
        // 将 JavaScript 代码放在这里
        document.addEventListener('DOMContentLoaded', function() {
            // 获取表单元素
            var form = document.getElementById('loginForm');
            form.addEventListener('submit', function(event) {
                event.preventDefault();

                var username = document.getElementById('username').value;
                var password = document.getElementById('password').value;

                // 发送登录请求
                fetch('/login', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded'
                    },
                    body: 'username=' + encodeURIComponent(username) + '&password=' + encodeURIComponent(password)
                })
                    .then(response => response.json())
                    .then(data => {
                        if (data.error) {
                            document.getElementById('error').textContent = data.error;
                        } else {
                            document.getElementById('error').textContent = '';
                            alert('登录成功');
                            // 在此处可以进行页面跳转或其他操作
                        }
                    })
                    .catch(error => console.error('请求错误:', error));
            });
        });
    </script>
</head>
<body>
<h1>图书管理系统登录</h1>
<form id="loginForm">
    <div>
        <label for="username">用户名:</label>
        <input type="text" id="username" name="username" required>
    </div>
    <div>
        <label for="password">密码:</label>
        <input type="password" id="password" name="password" required>
    </div>
    <div>
        <button type="submit">登录</button>
    </div>
</form>
<div id="error"></div>
</body>
</html>
